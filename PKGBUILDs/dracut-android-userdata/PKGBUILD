pkgname=dracut-android-userdata
pkgver=1
pkgrel=1
pkgdesc="Dracut hook to facilitate booting from an Android userdata partition"
arch=(any)
url="https://github.com/samcday/archlinux-msm8916"
license=('MIT')
options=()
depends=(
    bash
    jq
    parted
    multipath-tools
)
source=(
    module-setup.sh
    mount-userdata.sh
    userdata-partition.rules
)
sha256sums=('a514a68a69ddb557aca7a53641cc014c85f6d00a4094b8532cd4337a2c7da8d3'
            '05431c1952cb2458139811132141d6c87cfdce795a8df030f66bce7516a4ebae'
            'f46c4d05337d84b71b7812fc4a83e81345a44e95543f84f641b2ddf415ad6af4')

package() {
    moddir=$pkgdir/usr/lib/dracut/modules.d/50android-userdata

    install -D -m644 module-setup.sh "$moddir/module-setup.sh"
    install -D -m755 mount-userdata.sh "$moddir/mount-userdata.sh"
    install -D -m644 userdata-partition.rules "$moddir/userdata-partition.rules"
}
